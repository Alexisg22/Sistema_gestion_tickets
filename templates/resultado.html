<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultado del archivo procesado</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
 td[data-semaforo="verde"] {
     background-color: #28a745; /* Verde */
     color: white;
        }

td[data-semaforo="naranja"] {
    background-color: #fd7e14; /* Naranja */
     color: white;
        }

td[data-semaforo="rojo"] {
    background-color: #dc3545; /* Rojo */
     color: white;
        }
</style>

</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">Vista previa del archivo procesado</h2>
        <form action="{{ url_for('descargar') }}" method="post">
            <div class="table-wrapper">
                <table class="table align-middle table-sm table-hover table-responsive table-striped-columns">
					<thead class="table-dark">
                        <tr>
                            <th>Solicitante</th>
                            <th>Correo Electrónico</th>
                            <th>N° Orden de Trabajo</th>
                            <th>REQ</th>
                            <th>Estado</th>
                            <th>Fecha de Creación</th>
                            <th>Fecha Ult Modificación</th>
                            <th>Detalle Descripción</th>
                            <th>Observación</th>
                            <th>Entrega Plan de Trabajo</th>
                            <th>Pruebas con SIMM</th>
                            <th>Posible Salida a Producción</th>
                            <th>Firma SIMM</th>
                            <th>Semáforo</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in datos %}
                        <tr>
                            <td>
                                <select name="Solicitante" class="form-select">
                                    {% for item in solicitantes %}
                                    <option value="{{ item }}" {% if row['Solicitante'] == item %}selected{% endif %}>{{ item }}</option>
                                    {% endfor %}
                                </select>
                            </td>
                            <td><input type="text" name="Correo Electronico" value="{{ row['Correo Electronico'] }}"></td>
                            <td><input type="text" name="N° Orden de trabajo" value="{{ row['N° Orden de trabajo'] }}"></td>
                            <td><input type="text" name="REQ" value="{{ row['REQ'] }}"></td>
                            <td><input type="text" name="Estado" value="{{ row['Estado'] }}"></td>
                            <td><input type="date" name="Fecha de creación" value="{{ row['Fecha de creación'] }}"></td>
                            <td><input type="date" name="Fecha Ult Modificación" value="{{ row['Fecha Ult Modificación'] }}"></td>
                            <td><input type="text" name="Detalle descripción" value="{{ row['Detalle descripción'] }}"></td>
                            <td><input type="text" name="Observación" value="{{ row['Observación'] }}"></td>
                            <td><input type="date" name="Entrega Plan de Trabajo" value="{{ row['Entrega Plan de Trabajo'] }}"></td>
                            <td><input type="date" name="Pruebas con SIMM" value="{{ row['Pruebas con SIMM'] }}"></td>
                            <td><input type="date" name="Posible Salida a Producción" value="{{ row['Posible Salida a Producción'] }}"></td>
                            <td>
                                <select name="Firma SIMM">
									<option value="Sí" {% if row['Firma SIMM'] == '' %}selected{% endif %}></option>
                                    <option value="Sí" {% if row['Firma SIMM'] == 'Sí' %}selected{% endif %}>Sí</option>
                                    <option value="No" {% if row['Firma SIMM'] == 'No' %}selected{% endif %}>No</option>
                                </select>
                            </td>
                            <td data-semaforo="{{ row['Semaforo'] }}">{{ row['Semaforo'] }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="text-center mt-4">
                <button type="submit" class="btn btn-success">Descargar</button>
                <a href="{{ url_for('regresar') }}" class="btn btn-secondary ms-2">Regresar</a>
            </div>
        </form>
    </div>
</body>
</html>
